<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
	crossorigin="anonymous"></script>

<title>Smart Hospital</title>
<style type="text/css">
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: blue;
  margin: 0;
}
input:focus{
outline:black;
}
* {
	margin: 0;
	padding: 0;
}

.container1 {
	width: 100%;
	height: 1080px;
	background: #FFFFFF 0% 0% no-repeat padding-box;
	opacity: 1;
	position: absolute;
}

.header1 {
	width: 100%;
	height: 100px;
	position: fixed;
	background-color: #FFFFFF;
	z-index: 30;
}

.header1 img {
	top: 23px;
	left: 277px;
	width: 150px;
	height: 52px;
	/* border: 3px solid #1580EB; */
	opacity: 1;
	position: absolute;
}

#button1 {
	position: absolute;
	top: 38px;
	left: 966px;
	width: 112px;
	height: 22px;
	text-align: left;
	font: normal normal normal 20px/23px Arial;
	letter-spacing: 0px;
	opacity: 1;
	background: none;
	border: none;
	color: #1580EB;
	text-underline-offset: 10px;
	text-decoration: underline;
}

#button2 {
	position: absolute;
	top: 38px;
	left: 1133px;
	width: 129px;
	height: 22px;
	/* UI Properties */
	text-align: left;
	font: normal normal normal 20px/23px Arial;
	letter-spacing: 0px;
	color: #2C2C2C;
	opacity: 1;
	background: none;
	border: none;
}

#button3 {
	position: absolute;
	top: 29px;
	left: 1318px;
	width: 135px;
	height: 40px;
	/* UI Properties */
	background: #FFFFFF 0% 0% no-repeat padding-box;
	border: 1px solid #1580EB;
	opacity: 1;
	color: #1580EB;
	    font: normal normal normal 20px/23px Arial;
}

#button3a {
	top: 29px;
	left: 1508px;
	width: 135px;
	height: 40px;
	/* UI Properties */
	background: #1580EB 0% 0% no-repeat padding-box;
	opacity: 1;
	position: absolute;
	border: none;
	color: #FFFFFF;
	    font: normal normal normal 20px/23px Arial;
}

.h3a p {
	position: absolute;
	top: 130px;
	left: 277px;
	width: 387px;
	height: 44px;
	text-align: left;
	font: normal normal normal 40px/45px Arial;
	letter-spacing: 0px;
	color: #1580EB;
	opacity: 1;
}

.registerform {
top: 130px;
left: 943px;
width: 700px;
height: 759px;
/* UI Properties */
background: #1580EB 0% 0% no-repeat padding-box;
border: 1px solid #707070;
opacity: 1;
	position: absolute;
}

.appointmentimage {
	top: 195px;
	left: 277px;
	width: 672px;
	height: 657px;
	/* UI Properties */
	background: transparent  0% 0% no-repeat
		padding-box;
	border: 1px solid #707070;
	opacity: 1;
	position: absolute;
}

.regtitlea {
	position: absolute;
	top: 35px;
	left: 256px;
	width: 248px;
	height: 39px;
	/* UI Properties */
	text-align: left;
	font: normal normal normal 30px/39px Roboto;
	letter-spacing: 0px;
	color: #FFFFFF;
	opacity: 1;
	font-family: 'Roboto', sans-serif;
}

#form1 {
	position: absolute;
	top: 93px;
	left: 43px;
	width: 615px;
	height: 60px;
	/* UI Properties */
	border: 1px solid #FFFFFF;
	opacity: 1;
	background: none;
	color: #FFFFFF;
	padding: 24px;
}

#form2 {
	position: absolute;
	top: 173px;
	left: 43px;
	width: 615px;
	height: 60px;
	/* UI Properties */
	border: 1px solid #FFFFFF;
	opacity: 1;
	background: none;
	color: #FFFFFF;
	padding: 24px;
}

#form3 {
	position: absolute;
	top: 253px;
	left: 43px;
	width: 615px;
	height: 60px;
	/* UI Properties */
	border: 1px solid #FFFFFF;
	opacity: 1;
	background: none;
	color: #FFFFFF;
	padding: 24px;
}

#form4 {
	position: absolute;
	top: 333px;
	left: 43px;
	width: 295px;
	height: 60px;
	/* UI Properties */
	border: 1px solid #FFFFFF;
	opacity: 1;
	background: none;
	color: #FFFFFF;
	padding: 24px;
}

#form5 {
	position: absolute;
	top: 333px;
	left: 363px;
	width: 295px;
	height: 60px;
	border: 1px solid #FFFFFF;
	opacity: 1;
	background: none;
	color: #FFFFFF;
	padding: 24px;
}

#form6 {
	position: absolute;
	top: 413px;
	left: 43px;
	width: 615px;
	height: 60px;
	/* UI Properties */
	border: 1px solid #FFFFFF;
	opacity: 1;
	background: none;
	color: #FFFFFF;
	padding: 24px;
}

#form7{
	position: absolute;
    top: 623px;
    left: 986px;
    width: 615px;
    height: 60px;
    border: 1px solid #FFFFFF;
    opacity: 1;
    background: none;
    color: #FFFFFF;
    cursor: pointer;
    padding: 18px;
   
}

#form8 {
	position: absolute;
	top: 663px;
	left: 43px;
	width: 208px;
	height: 61px;
	/* UI Properties */
	background: #1580EB 0% 0% no-repeat padding-box;
	background: none;
	border: 1px solid #FFFFFF;
	opacity: 1;
	color: #FFFFFF;
	font-family: 'Roboto', sans-serif;
	font-size:20px;
	
}

#form9 {
	position: absolute;
	top: 663px;
	left: 445px;
	width: 208px;
	height: 61px;
	/* UI Properties */
	color: #174FAC;
	border: 1px solid #FFFFFF;
	opacity: 1;
	background-color: white;
	font-family: 'Roboto', sans-serif;
	font-size:20px;
}
#form10 {
	position: absolute;
    top: 573px;
    left: 43px;
    width: 615px;
    height: 60px;
    border: 1px solid #FFFFFF;
    opacity: 1;
    background: none;
    color: #FFFFFF;
    cursor: pointer;
    padding: 18px;
}
.footer1 {
	top: 930px;
	left: 0px;
	width: 100%;
	height: 150px;
	background: #2A282F 0% 0% no-repeat padding-box;
	border: 1px solid #707070;
	opacity: 1;
	position: absolute;
}

::-webkit-input-placeholder { /* Edge */
	color: #FFFFFF;
}

:-ms-input-placeholder { /* Internet Explorer */
	color: #FFFFFF;
}

::placeholder {
	color: #FFFFFF;
}

input::placeholder {
	position: absolute;
	left: 25px;
	top: 17px;
}
input::value {
	position: absolute;
	left: 25px;
	top: 17px;
}
.appointmentimage img {
position:absolute;

width: 672px;
height: 657px;
/* UI Properties */
background: transparent  0% 0% no-repeat padding-box;
border: 1px solid #707070;
opacity: 1;
}



</style>
</head>
<body >
	<div class="container1">
		<div class="header1">
			<a href="http://localhost:8080/hospital/patients"> <img
				src="https://storage.googleapis.com/smco-web-static-assets/TraineeProject/vig_logo.jpg">
			</a> <a href="http://localhost:8080/hospital/Appointment">
				<button id="button1">Appointment</button>
			</a> <a href="http://localhost:8080/hospital/PatientDetails"><button
					id="button2">Patient Details</button></a> <!-- <a
				href="http://localhost:8080/hospital/Register"><button
					id="button3">Register</button></a> <a
				href="http://localhost:8080/hospital/Login"><button
					id="button3a">Login</button></a> -->
		</div>
		<div class="h3a">
			<p>Make an Appointment</p>
		</div>
		<div class="appointmentimage">
			<img
				src="https://img.freepik.com/premium-vector/book-doctor-appointment-card-template_151150-11155.jpg?w=740">
		</div>

		<div class="registerform">
			<div class="regtitlea">
				<p>Book Appointment</p>
			</div>
			<div class="registration">
				<input type="number" id="form1" placeholder="Enter Mobile Number" required> 
				
				<input type="text" id="form2"placeholder="Patient Name" required> 
				<input type="text" id="form3" placeholder="Patient disease" required> 
				<input type="number" id="form4" placeholder="Patient Age" required> 
				<input type="date" name="somedate" id="form5" placeholder="Date & Time">
				<input type="text" id="form6"	placeholder="Patient Address" required> 
				<!-- <select placeholder="Specialist" id="form7" > -->
				<!--  <option style="background: white;color:black;" value="" disabled selected>Specialist</option> -->
				 <!-- <option style="background: white;color:black;" value="Cardiologists">Cardiologists</option> 
				  <option style="background: white;color:black;" value="Dermatologists">Dermatologists</option>
				  <option style="background: white;color:black;" value="Endocrinologists">Endocrinologists</option>
				  <option style="background: white;color:black;" value="Pediatricians">Pediatricians</option>
				  <option style="background: white;color:black;" value="General Surgeons">General Surgeons</option> -->
				<select placeholder="Doctor Name" id="form10"> 
				</select>				 
				<input type="reset" id="form8" value="cancel"> 
				<input type="submit" id="form9" onclick="dataFilter();dataForm()" value="Schedule" >
			</div>
		</div>
		<div class="footer1"></div>




	</div>
	
<!-- 	<script > 
    $(document).ready(function()
    {
    $("#form7").change(function() 
   	{
    var Specialist = $(this).val();
    if (Specialist == "")
    {
      $("#form10").prop("disabled", true);
    } 
    else 
    {
      $("#form10").prop("disabled", false);
      
      if (Specialist == "Dermatologists")
      {
        $("#form10").html("<option style='background: white;color:black;' value=''>--Select--</option><option style='background: white;color:black;' value='Akash'>Akash</option>");
      } 
      else if (Specialist == "Endocrinologists") 
      {
        $("#form10").html("<option style='background: white;color:black;' value=''>--Select--</option><option style='background: white;color:black;' value='Anil'>Anil</option><option style='background: white;color:black;' value='Dhinesh'>Dhinesh</option>");
      }
      else if (Specialist == "Cardiologists") 
      {
          $("#form10").html("<option style='background: white;color:black;' value=''>--Select--</option><option style='background: white;color:black;' value='Mani'>Mani</option><option style='background: white;color:black;' value='Logesh'>Logesh</option>");
      }
      else if (Specialist == "Pediatricians") 
      {
          $("#form10").html("<option style='background: white;color:black;' value=''>--Select--</option><option style='background: white;color:black;' value='Prakash'>Prakash</option>");
      }
      else if (Specialist == "General Surgeons") 
      {
          $("#form10").html("<option style='background: white;color:black;' value=''>--Select--</option><option style='background: white;color:black;' value='Praveen'>Praveen</option><option style='background: white;color:black;' value='Rajesh'>Rajesh</option>");           
      }
    }  
  });
    });
</script> -->
<script type="text/javascript">

var today = new Date().toISOString().split('T')[0];
document.getElementsByName("somedate")[0].setAttribute('min', today);

function dataForm() {
	  // Get form values
	  var name = document.getElementById("form2").value.trim();
	  var disease = document.getElementById("form3").value.trim();
	  var age = document.getElementById("form4").value;
	  var datetime = document.getElementById("form5").value;
	  var address = document.getElementById("form6").value.trim();
	  // Validate name
	  if (name === "") {
	    console.log("Please enter patient name");
	    return false;
	  }
	  // Validate disease
	  if (disease === "") {
	    console.log("Please enter patient disease");
	    return false;
	  }
	  // Validate age
	  if (isNaN(age) || age === "") {
	    console.log("Please enter a valid patient age");
	    return false;
	  }
	  // Validate date and time
	  if (datetime === "") {
	    console.log("Please select date and time");
	    return false;
	  }
	  // Validate address
	  if (address === "") {
	    console.log("Please enter patient address");
	    return false;
	  }
	  // If all fields are valid, submit the form
	  return true;
	}



    function dataFilter() {
      console.log("data");
      /* debugger; */
      var PatientMobileNumber = document.getElementById("form1").value; 
      var PatientName = document.getElementById("form2").value;
      var Patientdisease = document.getElementById("form3").value;
      var PatientAge = document.getElementById("form4").value;
      console.log("PatientAge "+ PatientAge);
      var Date = document.getElementById("form5").value;
      var PatientAddress = document.getElementById("form6").value;
      var Specialist = document.getElementById("form7").value;
      var DoctorName = document.getElementById("form10").value; 
      
      
      
      var data = {"mobile_number":PatientMobileNumber,
    		  "name" : PatientName,
    		  "disease" : Patientdisease,
    		  "age":PatientAge,
    		  "date":Date, 
    		  "address":PatientAddress,
    		  "Specialist":Specialist,
    		  "doctor_name":DoctorName}; 
      console.log(data);
      $.ajax({
        type : "POST",
        headers : {
          'Content-Type' : 'application/json'
        },
        url : "/hospital/submitAppointment", //this is my servlet
        data : JSON.stringify(data),
        dataType:'json',
        // cache: false,
        // async: false,
        success : function(data) {
        	console.log("hiii");
        	var pData = data.mobile_number;
        	
        	console.log(pData);
        	
          console.log("hiii");
          window.location.href="http://localhost:8080/hospital/PatientDetails";
        }
      });
    }
    
    specialistData();
	/* debugger; */
    function specialistData() {
    	
      $.ajax({
        type: "POST",
        headers: {
          'Content-Type': 'application/json'
        },
        url: "/hospital/getSpecialistdata",
        dataType: 'json',
        success: function(data) {
          console.log(data);

          /* var key = Object.keys(data); */
          var map = data;
			/* debugger; */
          var dropdown = document.createElement("select");
          
          dropdown.id = "form7";
          var emptyOption = document.createElement("option");
          emptyOption.setAttribute("value", "");
          emptyOption.setAttribute("disabled", "");
          emptyOption.setAttribute("selected", "");
          emptyOption.textContent = "Select a specialist";
          dropdown.appendChild(emptyOption);

          

          for (var i = 0; i < data.length; i++) { 
            var option = document.createElement("option");
            option.setAttribute('style', 'color:black');
            option.setAttribute("id", '' , [i]);
            
            option.value = map[i];
            option.text = map[i];
            dropdown.appendChild(option);
          }

          document.body.appendChild(dropdown);
          /* debugger;
          debugger; */
          $(document).ready(function() {

            $("#form7").on("change", function() {
          	  
              console.log("hiii");
              doctorData();
            });

            function doctorData() {
            	var e = document.getElementById("form7");
            	var value = e.value;
            	var text = e.options[e.selectedIndex].text;
            	console.log ("" + value);
            	console.log ("" +text);
            	
            	var specialist = text;
            	var value = {"specialist":specialist};
            	document.getElementById("form7").style.borderColor=("#FFFFFF");
            	
            	/* document.getElementById("form10").innerHTML=""; */
              $.ajax({
                type: "POST",
                headers: {
                  'Content-Type': 'application/json'
                },
                url: "/hospital/getDoctordata",
                data : JSON.stringify(value),
                dataType: 'json',
                success: function(result) {
                  var doctorName = result;
                  
                  console.log(doctorName);
                  
                  var key = Object.keys(doctorName);
                  
                  var dropdown = document.getElementById("form10");
                  dropdown.innerHTML = "";                  
                  for (var i = 0; i < key.length; i++) {
                	var option = document.createElement("option");
                    option.setAttribute('style', 'color:black');
                    option.value = doctorName[key[i]];
                    option.text = doctorName[key[i]];
                    dropdown.appendChild(option);
                    
                  }
                  var div = document.getElementByClass("registration");
                  div.appendChild(dropdown);
                },
                error: function(jqXHR, textStatus, errorThrown) {
                  console.log("AJAX error: " + errorThrown);
                }
              });
            }
          });
        }
        
      });
    }
	
    let inputElement = document.querySelector('form7'); // select the input element
    inputElement.addEventListener('click', () => {
      inputElement.style.outline = 'none'; // remove the outline on click
    });

    
  
    
  </script>


</body>
</html>